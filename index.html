<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>

    let audio = new Audio('./1.mp3')
    audio.crossOrigin = "anonymous";
    audio.play()
    var context = new window.AudioContext();
    // //加载媒体

    // //创建节点
    var source = context.createMediaElementSource(audio);
    var analyser = context.createAnalyser();
    source.connect(analyser);
    analyser.connect(context.destination);

     var output = new Uint8Array(361);
    // //计算出采样频率44100所需的缓冲区长度
    // var length = analyser.frequencyBinCount * 44100 / context.sampleRate | 0;
    // //创建数据 
    // var output2 = new Uint8Array(length);
    (function drawSpectrum(){

      analyser.getByteFrequencyData(output);//获取频域数据
      console.log(output);
      requestAnimationFrame(drawSpectrum);
    })()
    // analyser.getByteTimeDomainData(output2)
  </script>
</body>
</html>